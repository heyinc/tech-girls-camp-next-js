# 4. 商品詳細ページを作ろう

いまは商品をクリックしても何も起きません。商品をクリックしたら商品詳細ページに遷移してみましょう。

## やること

`src/app/items/[id]/page.tsx` を作ります。

```diff
+import items from "../../../data/items.json";
+import Link from "next/link";
+import { notFound } from "next/navigation";
+
+type Props = {
+  params: {
+    id: string;
+  };
+};
+
+export default async function ItemDetail(props: Props) {
+  const item = items.items.find(
+    (item) => item.id === parseInt(props.params.id)
+  );
+
+  if (!item) {
+    notFound();
+  }
+
+  return (
+    <main>
+      <Link href="/">← 商品一覧に戻る</Link>
+      <img src={item.image} alt={item.name} width={300} />
+      <h1>{item.name}</h1>
+      <p>{item.description}</p>
+      <p>{item.price.toLocaleString()}円</p>
+      <p>カテゴリー: {item.category}</p>
+    </main>
+  );
+}
```

さらに、商品一覧ページで商品をクリックしたら商品詳細ページに遷移するようにします。

```diff
             className="border rounded-lg overflow-hidden shadow-lg"
           >
             <div className="p-4">
-              <img
-                src={item.image}
-                alt={item.name}
-                className="w-full h-48 object-cover"
-              />
-              <h2 className="text-xl font-semibold mb-2">{item.name}</h2>
-              <p className="text-gray-600 mb-2">{item.description}</p>
-              <p className="text-xl font-bold text-blue-600">{item.price}円</p>
+              <Link href={`/items/${item.id}`}>
+                <img
+                  src={item.image}
+                  alt={item.name}
+                  className="w-full h-48 object-cover"
+                />
+                <h2 className="text-xl font-semibold mb-2">{item.name}</h2>
+                <p className="text-gray-600 mb-2">{item.description}</p>
+                <p className="text-xl font-bold text-blue-600">
+                  {item.price}円
+                </p>
+              </Link>
             </div>
           </div>
         ))}
```

## 解説

### 動的ルーティング
Next.jsでは src/appの下にディレクトリ（＝フォルダ）を作り、そこにpage.tsxという名前のファイルを置くとページができます。このディレクトリだと `/items/1`のようなURLになります。`[id]`とすると、[]で囲われた部分が任意の値になります。今回はidという文字を[]で囲ったので、これを商品のIDとして使いましょう。

### 存在しない商品の処理
存在しない商品にアクセスした場合「ありませんでした」と返したいですね。これはNext.jsの`notFound`を使うとできます。
ドキュメント: https://nextjs.org/docs/app/api-reference/functions/not-found

### リンクの作成
全体を`Link`で囲ってあげるとリンクになります！
ドキュメント: https://nextjs.org/docs/pages/api-reference/components/link

### 型注釈
```
type Props = {
  params: {
    id: string;
  };
};
```

は型注釈というものです。これによって、propsの型を指定することができます。試しにVSCodeで存在しないキーにアクセスしてみましょう。

