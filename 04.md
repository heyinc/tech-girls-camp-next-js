# 4. 商品詳細ページを作ろう

いまは商品をクリックしても何も起きません。商品をクリックしたら商品詳細ページに遷移してみましょう。

## やること

`src/app/items/[id]/page.tsx` を作ります。

```diff
+import items from "../../../data/items.json";
+
+type Props = {
+  params: {
+    id: string;
+  };
+};
+
+export default async function ItemDetail(props: Props) {
+  const item = items.items.find(
+    (item) => item.id === parseInt(props.params.id)
+  );
+
+  if (!item) {
+    return (
+      <main>
+        <h1>商品が見つかりませんでした</h1>
+      </main>
+    );
+  }
+
+  return (
+    <main>
+      <a href="/">← 商品一覧に戻る</a>
+      <img src={item.image} alt={item.name} width={300} />
+      <h1>{item.name}</h1>
+      <p>{item.description}</p>
+      <p>{item.price.toLocaleString()}円</p>
+      <p>カテゴリー: {item.category}</p>
+    </main>
+  );
+}
```

さらに、商品一覧ページで商品をクリックしたら商品詳細ページに遷移するようにします。

```diff
 import items from "../data/items.json";

 const ITEMS_PER_PAGE = 5;

 export default function Home() {
 export default async function Home({ searchParams }) {
   const params = await searchParams;
   const page = params.page;

   const allItems = items.items;

   const currentPage = page ? parseInt(page) : 1;

   const indexOfLastItem = currentPage * ITEMS_PER_PAGE;
   const indexOfFirstItem = indexOfLastItem - ITEMS_PER_PAGE;
   const currentItems = allItems.slice(indexOfFirstItem, indexOfLastItem);

   return (
     <main className="container mx-auto px-4 py-8">
       <h1 className="text-3xl font-bold mb-8">商品一覧</h1>
       <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
         {allItems.map((item) => (
         {currentItems.map((item) => (
           <div key={item.id} className="border rounded-lg overflow-hidden shadow-lg">
+          <a href={`/items/${item.id}`}>
           <div className="p-4">
             <img
               src={item.image}
               alt={item.name}
               className="w-full h-48 object-cover"
             />
             <h2 className="text-xl font-semibold mb-2">{item.name}</h2>
             <p className="text-gray-600 mb-2">{item.description}</p>
             <p className="text-xl font-bold text-blue-600">{item.price}円</p>
           </div>
+          </a>
           </div>
         ))}
       </div>

## 解説

### 動的ルーティング
Next.jsでは src/appの下にディレクトリ（＝フォルダ）を作り、そこにpage.tsxという名前のファイルを置くとページができます。このディレクトリだと `/items/1`のようなURLになります。`[id]`とすると、[]で囲われた部分が任意の値になります。今回はidという文字を[]で囲ったので、これを商品のIDとして使いましょう。

### 存在しない商品の処理
存在しない商品にアクセスした場合「ありませんでした」と返したいですね。これは途中で `return` して実現しています。JavaScriptでは `return` した時点で関数が終了するので、その後の処理は実行されません。

### 型注釈
```
type Props = {
  params: {
    id: string;
  };
};
```

は型注釈というものです。これによって、propsの型を指定することができます。試しにVSCodeで存在しないキーにアクセスしてみましょう。

